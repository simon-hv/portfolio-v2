---
import { CardHeader, CardTitle, Card as ShadcnCard } from '@/components/ui/card'

interface Props {
  colSpan?: string
  rowSpan?: string
}

const { colSpan, rowSpan } = Astro.props
const hasTitle = Astro.slots.has('title')
---

<ShadcnCard
  className={`card-animate align-start group relative col-span-1 flex h-auto w-full transform flex-col justify-start overflow-hidden rounded-2xl shadow-lg transition duration-75 ease-in-out ${
    colSpan || 'md:col-span-2'
  } ${rowSpan || ''}`}
>
  {
    hasTitle && (
      <CardHeader className="border-b mb-4">
        <CardTitle className="flex items-center gap-3">
          <slot name="title" />
        </CardTitle>
      </CardHeader>
    )
  }

  <slot />
</ShadcnCard>
<script>
  const cards = document.querySelectorAll('.card-animate')

  cards.forEach((card, idx) => {
    card.animate(
      [
        { transform: 'translateY(20px)', opacity: 0 },
        { transform: 'translateY(-10px)', opacity: 0.8 },
        { transform: 'translateY(0)', opacity: 1 },
      ],
      {
        duration: 1000,
        easing: 'ease-in-out',
        delay: idx * 300,
        fill: 'both',
      },
    )
  })
</script>
